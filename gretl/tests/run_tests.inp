set verbose off
clear

string WD = "/home/at/git/naiveFC/gretl"
string FILENAME = "foo.csv"		# dummy file

set workdir @WD
include "./src/naiveFC.inp" --force


matrix m = ones(2,1)
m[1] = NA
if ok(fc_interval_width(m, 0.9)[1]) != 0
    stop
endif
if !(fc_interval_width(m, 0.9)[2] >= 1.644 && fc_interval_width(m, 0.9)[2] <= 1.6449)
    # approximate exact floating number
    stop
endif


bundle b = defbundle("which", "rw", "level", 0.9)
strings S = gen_column_names(&b)
if nelem(S) != 3
    stop
endif
if S[1] != "rw" || S[2] != "Lo (5.0)" || S[3] != "Up (95.0)"
    stop
endif

bundle b = defbundle("which", "avgfc", "level", 0.9)
strings S = gen_column_names(&b)
if nelem(S) != 1
    stop
endif
if S[1] != "avgfc"
    stop
endif


strings S = array_of_horizon_labels(2)
if S[1] != " h=1" || S[2] != " h=2"
    stop
endif



# point_fc_and_factor_as_arrays
# get_point_low_up_bound_arrays


stop
if add_non_existing_file_type("foo.csv") != "foo.csv"
    stop
endif

if add_non_existing_file_type("csv.csv") != "csv.csv"
    stop
endif

if add_non_existing_file_type("foo") != "foo.csv"
    stop
endif

if add_non_existing_file_type("foo.CSV") != "foo.csv"
    stop
endif

if add_non_existing_file_type("{].CSV") != "{].csv"
    stop
endif

if add_non_existing_file_type("foo") != "foo.csv"
    stop
endif

if add_non_existing_file_type("foo.csv") != "foo.csv"
    stop
endif

if add_non_existing_file_type("csv") != "csv.csv"
    stop
endif

if valid_matrix(zeros(0,0)) != 0
    stop
endif

if valid_matrix(zeros(1,1)) != 1
    stop
endif


if valid_filename(".csv") != 0
    stop
endif

if valid_filename("") != 0
    stop
endif

if valid_filename("___/") != 1
    stop
endif



matrix m = mshape(seq(1,9), N_ROWS, N_COLS)
cnameset(m, "A B C")
strings rnam = array(N_ROWS)
loop i=1..N_ROWS -q
    rnam[i] = sprintf("R%d", $i)
endloop
rnameset(m, rnam)
m[3,1] = NA


printf "\nInfo: All tests passed.\n"


