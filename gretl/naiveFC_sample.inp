clear
set verbose off

#include naiveFC.gfn --force
include "/home/at/git/naiveFC/gretl/naiveFC.inp"

# Select an example
#==================
scalar runEX = 2

# Load data
if runEX==1
    open nysewk.gdt -q		# daily, 7d
    series y = close
elif runEX==2
    open AWM.gdt -q			# quarterly
    series y = YGA
elif runEX==3
    open hendry_jae.gdt -q	# annual
    series y = diff(gdp)
elif runEX==4
    open hall.gdt -q		# monthly
    series y = ewr
endif

#=======================
# Static naive forecasts
#=======================

# Forecast combination
bundle b = null
b = naiveFC(y, "avgFC")		# compute forecasts
naivePlot(&b)				# plot forecast results
print b
eval b.fc					# print forecast results
stop
# Forecast combination but up to h=15 forecast periods
bundle opt = null					# set specific options
scalar opt.h = 15
bundle b = naiveFC(y, "avgFC", opt)
b.preobs_fc = 5					# optional: set no. of pre.-forecast periods obs. to plot
naivePlot(&b)

# Mean forecast
bundle b = naiveFC(y, "meanFC")
naivePlot(&b)
eval b.fc

# Median forecast
bundle b = naiveFC(y, "medianFC")
naivePlot(&b)
eval b.fc

# Random-Walk
bundle b = naiveFC(y, "rwFC")
naivePlot(&b)
eval b.fc

# Random-Walk + Drift
bundle b = naiveFC(y, "rwdriftFC")
naivePlot(&b)
eval b.fc

# AR(1)
b = null
bundle b = naiveFC(y, "ar1FC")
naivePlot(&b)
eval b.fc

# AR(1) + Trend
bundle b = naiveFC(y, "ar1trendFC")
naivePlot(&b)
eval b.fc

# Seasonal mean
bundle b = naiveFC(y, "smeanFC")
naivePlot(&b)
eval b.fc

# Seasonal median
bundle b = naiveFC(y, "smedianFC")
naivePlot(&b)
eval b.fc

# Seasonal naive without drift
bundle b = naiveFC(y, "snaiveFC")
naivePlot(&b)
eval b.fc

# Seasonal naive with drift
bundle b = naiveFC(y, "snaivedriftFC")
naivePlot(&b)
eval b.fc
stop

#=========================
# Rolling-window forecasts
#=========================
bundle opts = null					# setup additional options
opts.type_roll = "rolling" 			# "rolling" / "recursive" -> type of moving-window forecasting  (optional)
opts.wsize = xmax($pd, 100) 			# moving window length (optional)
#opts.verbose = 0					# Don't print details (optional)

methods = defarray("ar1FC")#, "medianFC", "rwFC", "rwdriftFC", "smeanFC", "smedianFC", "snaiveFC", , "snaivedriftFC", "ar1FC", "ar1trendFC")
loop i=1..nelem(methods) -q
    bundle b = null
    eval methods[i]
    bundle b = naiveFC(y, methods[i], opts)
    eval b.fc
    
    # Plot (optional)
    b.preobs_fc = 15					# set no. of pre.-forecast periods obs. to plot
    naivePlot(&b)
endloop

